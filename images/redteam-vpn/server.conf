# CYROID Red Team Lab - OpenVPN Server Configuration

port 1194
proto udp
dev tun

ca /etc/openvpn/ca.crt
cert /etc/openvpn/server.crt
key /etc/openvpn/server.key
dh /etc/openvpn/dh.pem
tls-auth /etc/openvpn/ta.key 0

# VPN subnet for clients
server 10.8.0.0 255.255.255.0

# Push routes to internal network
push "route 172.16.2.0 255.255.255.0"

# DNS (point to DC)
push "dhcp-option DNS 172.16.2.12"

# Authentication via PAM (username/password)
plugin /usr/lib/openvpn/plugins/openvpn-plugin-auth-pam.so openvpn
verify-client-cert none
username-as-common-name

keepalive 10 120
cipher AES-256-GCM
auth SHA256

user nobody
group nobody
persist-key
persist-tun

status /var/log/openvpn-status.log
log-append /var/log/openvpn.log
verb 3
